<template>
  <div class="identicon"></div>
</template>

<script>
import jdenticon from "jdenticon";
import Vue from 'vue';
import { Address } from '@herajs/common';

const emptySvg = `
<svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="16" y="16" width="168" height="168" fill="#F0F0F0"/>
</svg>
`;

const invalidSvg = `
<svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect x="16" y="16" width="168" height="168" fill="#F0F0F0"/>
<path d="M142.5 100C142.5 123.472 123.472 142.5 100 142.5C76.5279 142.5 57.5 123.472 57.5 100C57.5 76.5279 76.5279 57.5 100 57.5C123.472 57.5 142.5 76.5279 142.5 100Z" stroke="#EE4648" stroke-width="3"/>
<path d="M105.321 118.392C105.321 115.342 103.102 112.894 99.9734 112.894C96.8977 112.894 94.6788 115.342 94.6788 118.392C94.6788 121.492 96.8977 123.946 99.9734 123.946C103.102 123.946 105.321 121.492 105.321 118.392ZM96.4508 105.523H103.549L104.257 83.4203V76.0545H95.743V83.4203L96.4508 105.523Z" fill="#EE4648"/>
</svg>
`;

const deploySvg = `
<svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16 16H184V184H16V16Z" fill="#F0F0F0"/>
<path d="M132 90.3636H65V108.636H132V90.3636Z" fill="#FF0097"/>
<path d="M107.636 66H89.3636V133H107.636V66Z" fill="#FF0097"/>
</svg>
`;

const mutlicallSvg = `
<svg width="200" height="200" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16 16H184V184H16V16Z" fill="#F0F0F0"/>
<path d="M106.016 53.8068C102.778 57.4085 99.9951 60.5134 99.8438 60.6997C96.3646 64.5187 94.4889 66.8473 94.7309 67.0647C94.8822 67.1889 96.0923 67.5614 97.4235 67.8409C98.7244 68.1203 99.8741 68.4308 99.9648 68.524C100.509 69.0518 96.0016 75.4478 92.7039 78.8321C86.7741 84.9798 79.0896 89.2335 70.6791 91.0653C68.3193 91.5621 66.1107 91.7484 59.1523 91.9037L50.53 92.09V98.9207V105.751L58.8498 105.72C66.1107 105.72 67.6839 105.627 71.1026 105.006C88.6196 101.839 103.928 90.4754 112.429 74.3301C113.186 72.8397 113.942 71.753 114.214 71.753C114.456 71.753 115.818 72.0325 117.21 72.374C118.631 72.7155 119.872 72.9018 119.993 72.7776C120.144 72.6224 119.902 71.4115 119.479 70.0453C117.845 64.736 114.426 53.4343 113.549 50.3915C113.035 48.6217 112.46 47.2245 112.248 47.2245C112.036 47.2245 109.253 50.1741 106.016 53.8068Z" fill="#FF0097"/>
<path d="M119.6 87.029L119.509 92.09L111.431 92.2452L103.353 92.4004L101.599 93.9839C100.63 94.8533 98.8454 96.3126 97.6655 97.213C96.4554 98.1134 95.457 98.8896 95.457 98.9207C95.457 98.9517 96.4554 99.728 97.6655 100.628C98.8454 101.529 100.63 102.988 101.599 103.857L103.353 105.441L111.431 105.596L119.509 105.751L119.6 110.781C119.63 113.576 119.751 115.842 119.842 115.842C119.932 115.842 121.959 114.693 124.289 113.327C126.649 111.93 129.039 110.533 129.583 110.222C130.098 109.881 131.005 109.384 131.55 109.043C132.064 108.732 134.031 107.614 135.846 106.528C139.839 104.199 142.925 102.367 144.771 101.28C145.527 100.846 146.647 100.194 147.282 99.8521C147.887 99.5106 148.401 99.107 148.401 98.9207C148.401 98.7344 147.766 98.2376 146.979 97.8029C146.163 97.3372 144.589 96.4368 143.409 95.7537C142.26 95.0706 140.626 94.1392 139.779 93.6424C138.962 93.1767 136.965 91.9968 135.392 91.0654C133.819 90.1339 131.913 89.0161 131.157 88.5815C130.4 88.1778 128.706 87.1532 127.375 86.3459C124.107 84.3588 120.023 81.9991 119.842 81.9991C119.751 81.9991 119.63 84.2657 119.6 87.029Z" fill="#FF0097"/>
<path d="M89.7087 102.243C86.6834 103.857 81.3587 106 78.2123 106.838C76.7903 107.242 75.5197 107.645 75.3987 107.77C75.2776 107.894 76.0037 108.297 77.0626 108.701C79.9065 109.726 84.8984 112.458 87.6515 114.507C91.9475 117.674 96.9092 123.325 99.4202 127.858C99.8135 128.572 100.056 129.224 99.9648 129.317C99.8741 129.411 98.6639 129.752 97.2722 130.063C95.8503 130.373 94.7006 130.777 94.7006 130.963C94.7006 131.242 103.686 141.551 110.191 148.754C110.886 149.53 111.492 150.244 111.492 150.368C111.492 150.524 111.764 150.617 112.066 150.617C112.52 150.617 112.762 150.213 113.156 148.847C113.761 146.612 114.819 143.041 117.875 133.074C119.176 128.821 120.144 125.219 119.993 125.064C119.872 124.94 118.995 125.033 118.057 125.281C117.119 125.529 115.788 125.84 115.062 125.933L113.761 126.15L112.399 123.542C108.103 115.221 101.235 107.366 93.793 102.305L91.9778 101.063L89.7087 102.243Z" fill="#FF0097"/>
</svg>
`;

export default Vue.extend({
  props: ['text', 'emptyIcon'],
  data () {
    return {
    }
  },
  watch: {
    text() {
      this.load();
    }
  },
  methods: {
    load() {
      if (this.text) {
        try {
          const address = new Address(this.text);
          this.$el.innerHTML = jdenticon.toSvg(`${address}`, 200);
        } catch (e) {
          this.$el.innerHTML = invalidSvg;
        }
      } else {
        if (this.emptyIcon === 'deploy') {
           this.$el.innerHTML = deploySvg;
        } else if (this.emptyIcon === 'multicall') {
           this.$el.innerHTML = mutlicallSvg;
        } else {
          this.$el.innerHTML = emptySvg;
        }
      }
    }
  },
  mounted() {
    this.load();
  },
});
</script>

<style lang="scss">
.identicon {
  width: 36px;
  height: 36px;

  svg {
    width: 100%;
    height: auto;
  }
  &.circle {
    border-radius: 100%;
    padding: 3px;
    border: 1px solid #f2f2f2;
    box-sizing: border-box;
  }
}
</style>
